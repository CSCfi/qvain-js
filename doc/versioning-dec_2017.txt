metax-admin-request@listat.csc.fi
on behalf of Hannu Kämäräinen <hannu.kamarainen@csc.fi>
Tue 2017-12-19, 16:37metax-admin <metax-admin@listat.csc.fi>
Inbox
Hello,

Updates arriving to test server as soon as PR's are processed:

1) Dataset versioning has been implemented. Details here: https://wiki.eduuni.fi/display/CSCMETAX/API+Documentation#APIDocumentation-Datasetversioning A couple of request examples probably to follow.

2) Browsing files a "dataset context".

The API /directories/pid/files now accepts an extra optional parameter "urn_identifier", which can be used to browse/retrieve files in a directory, showing only those files which were selected for that dataset (or existed in the directory at the time of selection).

Reminder of other file browsing API's: https://wiki.eduuni.fi/display/CSCMETAX/API+Documentation#APIDocumentation-BrowsingfilesinMetax

Example:

A directory /some/dir/ was created at point x in time, as a result of freerzing files 1, 2 and 3 in IDA. The identifier generated by Metax for the directory is mydir.

That directory is later selected to a dataset in Qvain. The identifier for the dataset is myidentifier. Later yet, somebody is appending files to the same directory (freezing more files), adding files 4, 5 and 6. This does NOT mean that a dataset which previously added that directory, now also contains those new frozen files. A dataset only knows about those files, which existed at the time the directory was added to it.

Now, if somebody browses/retrieves the files for that dataset using the API /directories/mydir/files?urn_identifier=myidentifier, they will only see files 1, 2 and 3. A user browsing a directory in Etsin might want to do that, or TPAS when selecting files belonging to a dataset.

When on the other hand, if somebody wants to browse ALL files currently existing in that directory (such as a user browsing in Qvain might want to do), they can still use /directories/mydir/files, and they would see files 1, 2, 3, 4, 5 and 6.



Comments, improvements, pointing out mistakes in the above logic are welcome.

-Hannu
