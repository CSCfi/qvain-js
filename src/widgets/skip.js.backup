import keysWithOrder from '@/lib/keysWithOrder.js'

export default {
	name: "skip",
	functional: true,
	render: function (createElement, context) {
		if (!('properties' in context.props.schema)) {
			//return createElement('div', "dead leaf")
			return undefined
		}

		var keys = context.parent.$store.state.hints[context.props.path] && typeof context.parent.$store.state.hints[context.props.path]['order'] === 'object' ? keysWithOrder(context.props.schema['properties'], context.parent.$store.state.hints[context.props.path]['order']) : Object.keys(context.props.schema.properties)

		return createElement(
			'div',
			{ class: "q-skipped" },
			keys.map(function(key) {
				let myPath = context.props.path + '/properties/' + key
				let uiTab = context.parent.$store.state.hints[myPath] && context.parent.$store.state.hints[myPath]['tab']
				let myTab = typeof uiTab === 'number' ? uiTab : context.props.tab

				return createElement('schema-tab-selector', {
					props: {
						schema: context.props.schema.properties[key],
						path: myPath,
						value: typeof context.props.value === 'object' ? context.props.value[key] : undefined,
						parent: context.props.value,
						property: key,
						tab: myTab,
						activeTab: context.props.activeTab,
					},
				})
			}),
			//context.children
		)
	},
	props: ['schema', 'path', 'value', 'parent', 'property', 'tab', 'activeTab'],
	components: {
		'schema-tab-selector': require('./v-schema-tab-selector.vue'),
	},
}
